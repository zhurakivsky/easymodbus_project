<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">

    <title>Title</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body style="text-align: center">

<h1 th:href="'/device/'+ ${device.id}" th:text="${device.name} + ':' + ${device.ipadress}" ></h1>
<div  >
<a th:href="'/device/del/'+ ${device.id}"><button>  Видалити </button></a>
<button onclick="edit('rename')" >  Rename </button>
<button onclick="edit('ip')" >  Change IP Address </button>
<button onclick="edit('port')" >  Change Port  </button><br>
</div>



<script th:inline="javascript">
    function edit(idOfButton) {

        if(document.getElementById("rename")==null
            && document.getElementById("ip")==null
            && document.getElementById("port")==null) {
                var input = document.createElement("input");
                input.setAttribute("type", "text");
                input.setAttribute("id", idOfButton);
                input.setAttribute("placeholder", idOfButton);
                var inputSubmit = document.createElement("input");
                inputSubmit.setAttribute("type", "submit");
                inputSubmit.setAttribute("id", idOfButton+"btn");
                document.body.appendChild(input);
                document.body.appendChild(inputSubmit);
            }else if(document.getElementById("rename")!=null){
            document.getElementById("rename").remove();
            document.getElementById("renamebtn").remove();
            edit(idOfButton);
        }else if(document.getElementById("ip")!=null){
            document.getElementById("ip").remove();
            document.getElementById("ipbtn").remove();
            edit(idOfButton);

        }else if(document.getElementById("port")!=null){
            document.getElementById("port").remove();
            document.getElementById("portbtn").remove();
            edit(idOfButton);
        }
        let $idOfButton = $('#'+idOfButton+'btn');
        $idOfButton.click(function () {
            if(idOfButton =="rename") {
                let $name = $('#' + idOfButton);
                let name = $name.val();
                $name.val('');


                console.log(name);
                console.log(idOfButton);


                let id = [[${device.id}]];
                //
                //
                console.log(id);
                // console.log(name)
                let deviceData = JSON.stringify({id, name})
                $.ajax({
                    url: 'http://localhost:8080/setName',
                    type: 'POST',
                    data: deviceData,
                    contentType: 'application/json',
                    // error: function (err) {
                    //     console.log(err);
                    // },
                    // success: function (result) {
                    //     console.log(result)
                    // }


                })
                console.log(deviceData);

            }
        })

    }


</script>


</body>
</html>